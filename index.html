<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ZeroTrust Bank ‚Äî Login</title>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <div class="login-container">
    <h1>üè¶ ZeroTrust Bank</h1>
    <p>Browser-based Zero Trust Banking Simulation</p>

    <form id="loginForm" autocomplete="off">
      <label>Username</label>
      <input id="username" type="text" required placeholder="Enter username"/>

      <label>Password</label>
      <input id="password" type="password" required placeholder="Enter password"/>

      <button class="btn" type="submit">Login</button>
      <p id="loginMsg" class="msg"></p>
    </form>
  </div>

  <!-- Core scripts -->
  <script src="js/storage.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/security.js"></script>

  <script>
    // Simple local login handler
    (function(){
      const form = document.getElementById('loginForm');
      const msg = document.getElementById('loginMsg');

      function show(text, cls){
        msg.textContent = text;
        msg.className = cls ? 'msg ' + cls : 'msg';
      }

      form.addEventListener('submit', ev => {
        ev.preventDefault();
        const user = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        if (!user || !pass) return show('Enter username and password','error');

        const u = StorageAPI.findUser(user);
        if (!u || u.password !== pass) {
          show('Invalid credentials','error');
          return;
        }

        Auth.setSession(u.username);
        show('Login successful! Redirecting...','success');
        setTimeout(() => location.href = 'dashboard.html', 800);
      });
    })();
  </script>
</body>
</html>
